(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"USc/":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-col",{attrs:{span:17,offset:3}},[a("a-steps",[a("a-step",{attrs:{status:"process",title:"创建合约"}},[a("a-icon",{directives:[{name:"show",rawName:"v-show",value:"contract"==e.step,expression:"step=='contract'"}],attrs:{slot:"icon",type:"loading"},slot:"icon"}),e._v(" "),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:"contract"!=e.step,expression:"step!='contract'"}],attrs:{slot:"icon",type:"solution"},slot:"icon"})],1),e._v(" "),a("a-step",{attrs:{status:"finish",title:"提交"}},[a("a-icon",{directives:[{name:"show",rawName:"v-show",value:"submit"==e.step,expression:"step=='submit'"}],attrs:{slot:"icon",type:"loading"},slot:"icon"}),e._v(" "),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:"submit"!=e.step,expression:"step!='submit'"}],attrs:{slot:"icon",type:"solution"},slot:"icon"})],1),e._v(" "),a("a-step",{attrs:{status:"wait",title:"完成"}},[a("a-icon",{attrs:{slot:"icon",type:"smile-o"},slot:"icon"})],1)],1)],1)},s=[];a.d(t,"a",function(){return r}),a.d(t,"b",function(){return s})},aXo5:function(e,t,a){"use strict";var r=a("vHdy"),s=a.n(r);t.default=s.a},jBlV:function(e,t,a){"use strict";var r=a("USc/"),s=a("aXo5"),n=a("KHd+"),o=Object(n.a)(s.default,r.a,r.b,!1,null,null,null);t.default=o.exports},u2NP:function(e,t,a){"use strict";a.r(t);var r=function(){return function(){this.name="",this.info="",this.sender_name="",this.sender_url="",this.admin_addressl="",this.admin_pubkeyl="",this.verifier_address=[],this.verifier_pubkey=[],this.point_token_symbol="",this.point_token_num="",this.reward_token_symbol="",this.reward_token_num="",this.exchange_time="",this.budget="",this.rate="",this.start_date="",this.end_date="",this.contract=""}}(),s={props:{show:{type:Boolean,default:!1},onDateRangeChange:{type:Function,default:function(){}}},mounted:function(){var e=new r;console.log("project",e)}},n=a("KHd+"),o=Object(n.a)(s,function(){var e=this.$createElement,t=this._self._c||e;return t("a-col",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],attrs:{span:17,offset:3}},[t("a-form-item",{attrs:{label:"任务名称","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"任务名称"}]}],expression:"[\n        'name',\n        {rules: [{ required: true, message: '任务名称' }]}\n      ]"}]})],1),this._v(" "),t("a-form-item",{attrs:{label:"任务描述","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["info",{rules:[{required:!0,message:"任务描述"}]}],expression:"[\n        'info',\n        {rules: [{ required: true, message: '任务描述' }]}\n      ]"}]})],1),this._v(" "),t("a-form-item",{attrs:{label:"发包方","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sender_name",{rules:[{required:!0,message:"发包方"}]}],expression:"[\n        'sender_name',\n        {rules: [{ required: true, message: '发包方' }]}\n      ]"}]})],1),this._v(" "),t("a-form-item",{attrs:{label:"发包链接","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sender_url",{rules:[{required:!0,message:"发包链接"}]}],expression:"[\n        'sender_url',\n        {rules: [{ required: true, message: '发包链接' }]}\n      ]"}]})],1),this._v(" "),t("a-form-item",{attrs:{label:"开始 / 结束时间","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["projectDateRange"],expression:"[\n        'projectDateRange'\n      ]"}],attrs:{name:"projectDateRange"},on:{change:this.onDateRangeChange}})],1)],1)},[],!1,null,null,null).exports,i={props:{show:{type:Boolean,default:!1}}},l=Object(n.a)(i,function(){var e=this.$createElement,t=this._self._c||e;return t("a-col",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],attrs:{span:17,offset:3}},[t("a-form-item",{attrs:{label:"验证人地址","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["verifier_address",{rules:[{required:!0,message:"名称"}]}],expression:"[\n        'verifier_address',\n        {rules: [{ required: true, message: '名称' }]}\n      ]"}]})],1),this._v(" "),t("a-form-item",{attrs:{label:"验证人公钥","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["verifier_pubkey",{rules:[{required:!0,message:"任务描述"}]}],expression:"[\n        'verifier_pubkey',\n        {rules: [{ required: true, message: '任务描述' }]}\n      ]"}]})],1),this._v(" "),t("a-form-item",{attrs:{label:"管理员地址","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["admin_addressl",{rules:[{required:!0,message:"发包方"}]}],expression:"[\n        'admin_addressl',\n        {rules: [{ required: true, message: '发包方' }]}\n      ]"}]})],1),this._v(" "),t("a-form-item",{attrs:{label:"管理员公钥","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["admin_pubkeyl",{rules:[{required:!0,message:"发包链接"}]}],expression:"[\n        'admin_pubkeyl',\n        {rules: [{ required: true, message: '发包链接' }]}\n      ]"}]})],1)],1)},[],!1,null,null,null).exports,c={props:{show:{type:Boolean,default:!1},onExchangePeriodTypeChange:{type:Function,default:function(){}}},data:function(){return{type:""}},methods:{onExchangeTypeChange:function(e){console.log("selected ",e.target.value),this.type=e.target.value}}},u=Object(n.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-col",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],attrs:{span:17,offset:3}},[a("a-form-item",{attrs:{label:"积分名称","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["token_symbol",{rules:[{required:!0,message:"*"}]}],expression:"[\n        'token_symbol',\n        {rules: [{ required: true, message: '*' }]}\n      ]"}]})],1),e._v(" "),a("a-form-item",{attrs:{label:"数量","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["total_budget",{rules:[{required:!0,message:"数量"}]}],expression:"[\n        'total_budget',\n        {rules: [{ required: true, message: '数量' }]}\n      ]"}]})],1),e._v(" "),a("a-form-item",{attrs:{label:"兑换类型：","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["exchangeType",{initalValue:"pool"}],expression:"[\n        'exchangeType',\n        {initalValue:'pool'}\n      ]"}],attrs:{buttonStyle:"solid",name:"exchangeType"},on:{change:e.onExchangeTypeChange}},[a("a-radio-button",{attrs:{value:"fixed"}},[e._v("固定单价")]),e._v(" "),a("a-radio-button",{attrs:{value:"pool"}},[e._v("瓜分奖金池")])],1)],1),e._v(" "),a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:"fixed"==e.type||"pool"==e.type,expression:"type=='fixed' || type=='pool' "}],attrs:{label:"兑换比率","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["rate",{rules:[{required:!0,message:"*"}]}],expression:"[\n        'rate',\n        {rules: [{ required: true, message: '*' }]}\n      ]"}]})],1),e._v(" "),a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:"pool"==e.type,expression:"type=='pool'"}],attrs:{label:"兑换周期：","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["exchangePeriodType",{initalValue:"day"}],expression:"[\n        'exchangePeriodType',\n        {initalValue:'day'}\n      ]"}],staticStyle:{width:"120px"},attrs:{name:"exchangePeriodType"},on:{change:e.onExchangePeriodTypeChange}},[a("a-select-option",{attrs:{value:"day"}},[e._v("每天")]),e._v(" "),a("a-select-option",{attrs:{value:"month"}},[e._v("每月")]),e._v(" "),a("a-select-option",{attrs:{value:"year"}},[e._v("每年")])],1)],1),e._v(" "),a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:"pool"==e.type,expression:"type=='pool'"}],attrs:{label:"每期奖励币数量","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pool_budget",{initValue:"0",rules:[{required:!1,message:"每期奖励币数量"}]}],expression:"[\n        'pool_budget',\n        {initValue:'0', rules: [{ required: false, message: '每期奖励币数量' }]}\n      ]"}]})],1)],1)},[],!1,null,null,null).exports,p=a("jBlV"),d=a("htFb"),m=function(){function e(){}return e.createNewProjectContract=function(){return new Promise(function(e){d.a.init().then(function(t){if(console.log("my.wallet",d.a),t){var a=d.a.getContractObj("AgentBuilder");console.log("==========="+JSON.stringify(a)),d.a.depoyContract(a.abi,a.bytecode,d.a.address).then(function(t){console.log("address"+t),e(t)})}}).catch(function(e){return console.error(e)})})},e.submitNewProject=function(e,t){var a=new r;return a.admin_addressl=e.admin_addressl,a.admin_pubkeyl=e.admin_pubkeyl,a.budget=e.budget,a.contract=t,a.info=e.info,a.name=e.name,a.rate=e.rate,"pool"==e.exchangeType?(a.exchange_time=e.exchangePeriodType,a.reward_token_num=e.total_budget,a.reward_token_symbol=e.token_symbol,a.budget=e.pool_budget):"fixed"==e.exchangeType&&(a.budget=e.total_budget,a.point_token_num=e.total_budget,a.point_token_symbol=e.token_symbol),a.sender_name=e.sender_name,a.sender_url=e.sender_url,a.start_date=e.projectDateRange[0].format("YYYY-MM-DD"),a.end_date=e.projectDateRange[1].format("YYYY-MM-DD"),a.verifier_address=[e.verifier_address],a.verifier_pubkey=[e.verifier_pubkey],console.log("formValues",e,a),fetch("http://39.105.68.35/api/project",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()})},e}(),v={components:{ProjectForm:o,VeriyForm:l,ExchangeForm:u,SubmitResult:p.default},data:function(){return{current:["project"],status:"init",form:this.$form.createForm(this)}},methods:{onExchangePeriodTypeChange:function(e){console.log(e)},onDateRangeChange:function(e,t){console.log("dateString",e,t,arguments)},submit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){e||(console.log("Received values of form: ",a),t.current=["result"],t.status="contract",m.createNewProjectContract().then(function(e){console.log("contract done",e),t.status="submit",m.submitNewProject(a,e).then(function(a){console.log("create project",a),t.status="done",t.$notification.open({duration:30,message:"你的项目创建成功",description:"ID: "+e,onClick:function(){}})})}))})},onSelectTab:function(e){this.current=[e]},handleSubmit:function(e){e.preventDefault(),this.form.validateFields(function(e,t){e||console.log("Received values of form: ",t)})}}},h=Object(n.a)(v,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-row",[a("a-col",{attrs:{span:17,offset:3}},[a("a-menu",{attrs:{mode:"horizontal"},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}},[a("a-menu-item",{key:"project",style:{width:"25%",textAlign:"center"}},[a("a-icon",{attrs:{type:"project"}}),e._v("项目信息\n        ")],1),e._v(" "),a("a-menu-item",{key:"manage",style:{width:"25%",textAlign:"center"}},[a("a-icon",{attrs:{type:"safety"}}),e._v("验证 / 管理\n        ")],1),e._v(" "),a("a-menu-item",{key:"exchange",style:{width:"25%",textAlign:"center"}},[a("a-icon",{attrs:{type:"dollar"}}),e._v("积分兑换\n        ")],1),e._v(" "),a("a-menu-item",{key:"result",style:{width:"25%",textAlign:"center"}},[a("a-icon",{attrs:{type:"deployment-unit"}}),e._v("创建结果\n        ")],1)],1)],1)],1),e._v(" "),a("a-row",{style:{marginTop:"60px"}},[a("ProjectForm",{attrs:{show:"project"===e.current[0],onDateRangeChange:e.onDateRangeChange}}),e._v(" "),a("VeriyForm",{attrs:{show:"manage"===e.current[0]}}),e._v(" "),a("ExchangeForm",{attrs:{show:"exchange"===e.current[0],onExchangePeriodTypeChange:e.onExchangePeriodTypeChange}}),e._v(" "),a("a-col",{directives:[{name:"show",rawName:"v-show",value:"result"===e.current[0],expression:"current[0]==='result'"}],attrs:{span:17,offset:3}},[a("a-steps",[a("a-step",{attrs:{status:"process",title:"创建合约"}},[a("a-icon",{directives:[{name:"show",rawName:"v-show",value:"contract"==e.status,expression:"status=='contract'"}],attrs:{slot:"icon",type:"loading"},slot:"icon"}),e._v(" "),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:"contract"!=e.status,expression:"status!='contract'"}],attrs:{slot:"icon",type:"solution"},slot:"icon"})],1),e._v(" "),a("a-step",{attrs:{status:"finish",title:"提交"}},[a("a-icon",{directives:[{name:"show",rawName:"v-show",value:"submit"==e.status,expression:"status=='submit'"}],attrs:{slot:"icon",type:"loading"},slot:"icon"}),e._v(" "),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:"submit"!=e.status,expression:"status!='submit'"}],attrs:{slot:"icon",type:"form"},slot:"icon"})],1),e._v(" "),a("a-step",{attrs:{status:"wait",title:"完成"}},[a("a-icon",{directives:[{name:"show",rawName:"v-show",value:"done"==e.status,expression:"status=='done'"}],attrs:{slot:"icon",type:"like"},slot:"icon"}),e._v(" "),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:"done"!=e.status,expression:"status!='done'"}],attrs:{slot:"icon",type:"smile-o"},slot:"icon"})],1)],1)],1)],1),e._v(" "),a("a-row",{style:{marginTop:"30px"}},[a("a-form-item",{attrs:{"wrapper-col":{span:17,offset:3}}},[a("a-button",{attrs:{type:"primary","html-type":"submit",block:""},on:{click:e.submit}},[e._v("提交保存")])],1)],1)],1)},[],!1,null,null,null);t.default=h.exports},vHdy:function(e,t){}}]);